<%= form_with(model: [@project, @issue]) do |form| %>
  <!----> <!----><div ng-if="mode != 'add-existing'">
    <div class="form-wrapper">
      <div class="main">
        <fieldset>
          <%= form.text_field :subject %>
        </fieldset>

        <fieldset>

          <%= form.text_area :description %>
        </fieldset>
        <fieldset>
          <section></section>
          <tg-attachments-simple
            attachments="attachments"
            on-add="addAttachment(attachment)"
            on-delete="deleteAttachment(attachment)"
          >
            <section
              tg-attachments-drop="vm.addAttachments(files)"
              class="attachments attachment-simple"
            >
              <div class="attachments-header">
                <h3 class="attachments-title"><span class="attachments-num"></span>
                  <span translate="ATTACHMENT.SECTION_NAME" class="attachments-text">Attachments</span></h3>
                <div id="a11y-add-attach" title="Add new attachment. " class="add-attach">
                  <button
                    type="button"
                    variant="primary"
                    ng-click="displayAttachmentInput()"
                    class="btn-icon add-attachment-button"
                  >
                    <tg-svg svg-icon="icon-add">
                      <svg>
                        <use xlink:href="#icon-add"></use>
                      </svg>
                    </tg-svg>
                  </button>

                  <input
                    aria-label="Add new attachment. "
                    id="add-attach"
                    type="file"
                    multiple="multiple"
                    ng-model="files"
                    tg-file-change="vm.addAttachments(files)"
                    class="ng-pristine ng-untouched ng-valid ng-empty"
                    aria-invalid="false"
                  >
                </div>
              </div>
              <!----><div ng-if="!vm.attachments.size" class="attachments-empty">
                <div>Drop attachments here!</div>
              </div><!---->
              <div class="attachment-body attachment-list">
                <!---->
              </div>
            </section></tg-attachments-simple>
        </fieldset>
      </div>
      <sidebar class="sidebar ticket-data">
        <fieldset class="status-button">
          <div style="background-color:#70728F" class="status-dropdown editable"><span class="status-text">New</span>
            <tg-svg svg-icon="icon-arrow-down">
              <svg>
                <use xlink:href="#icon-arrow-down"></use>
              </svg>
            </tg-svg>
          </div>
        </fieldset>
        <div ng-switch="objType">
          <!----><div ng-switch-when="issue">

            <div class="ticket-data-container">
              <tg-issue-type-button
                not-auto-save="true"
                ng-model="obj"
                class="
                  ticket-status
                  ng-pristine
                  ng-untouched
                  ng-valid
                  ng-not-empty
                "
                aria-invalid="false"
              ><div class="type-data clickable">
                  <%= form.label :issue_type %>
                  <%= form.select :issue_type, Issue.issue_types.keys %>
                </div></tg-issue-type-button>
              <tg-issue-severity-button
                not-auto-save="true"
                ng-model="obj"
                class="
                  ticket-status
                  ng-pristine
                  ng-untouched
                  ng-valid
                  ng-not-empty
                "
                aria-invalid="false"
              ><div class="severity-data clickable">
                  <%= form.label :severity %>
                  <%= form.select :severity, Issue.severities.keys %>
                </div></tg-issue-severity-button>
              <tg-issue-priority-button
                not-auto-save="true"
                ng-model="obj"
                class="
                  ticket-status
                  ng-pristine
                  ng-untouched
                  ng-valid
                  ng-not-empty
                "
                aria-invalid="false"
              ><div class="priority-data clickable">
                  <%= form.label :priority %>
                  <%= form.select :priority, Issue.priorities.keys %>
                </div></tg-issue-priority-button>
            </div>
            <div class="ticket-detail-settings">
              <tg-due-date-popover
                due-date="obj.due_date"
                is-closed="obj.is_closed"
                item="obj"
                obj-type="issue"
                not-auto-save="true"
              >
                <div class="due-date-button-wrapper">
                  <%= form.date_field :limitDate %>
                  <input
                    type="hidden"
                    picker-value=""
                    class="due-date no-focus"
                    autocomplete="off"
                  >
                  <div ng-hide="!open" class="date-picker-popover ng-hide" aria-hidden="true">
                    <div class="date-picker-container"><div class="pika-single is-hidden is-bound"></div></div>
                    <!---->
                  </div>
                </div></tg-due-date-popover>
            </div>
          </div><!----> <!----> <!---->
        </div>
        <label class="checkbox-container">
          <%= form.check_box :blocked, { class: "item-unblock item-block" }, false, true %>
          <span class="checkmark"></span>
        </label>

      </sidebar>
    </div>
    <div class="btn-container">
      <%= form.submit class: "btn-big add-item" %>
    </div>
  </div><!---->
<% end %>
